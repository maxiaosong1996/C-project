##3.6流水线和分支

流水线的先决条件是流水线计划提前，就是在多个循环迭代中交错代码，必须知道将执行那些代码，如果遇到if语句，执行分支的时候，这时候流水线优化则不能进行。

#分支预测

用于将条件代码转换为顺序代码，将分析代码中每个分支的历史，并假设行为在未来不会发生改变。对于循环结束条件，处理器将很快了解到大多数情况下，它必须进项下一次迭代，正确的做法是将下一次迭代流水线化，就好像我们确信它确实会发生一样。

perf可以用于分析整个程序执行过程中的分支预测失败的百分比等，可以通过整体的分析来快速得出程序的性能瓶颈在哪里，然后可以用perf record命令对相应的性能计数器进行单独的打印，然后通过perf report命令生成报告。